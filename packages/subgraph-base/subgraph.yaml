specVersion: 1.3.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: Bridge
    network: base
    source:
      address: "0x3eff766C76a1be2Ce1aCF2B69c78bCae257D5188"
      abi: Bridge
      startBlock: 23140000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - FailedToRelayMessage
        - Initialized
        - MessageInitiated
        - MessageSuccessfullyRelayed
        - OwnershipHandoverCanceled
        - OwnershipHandoverRequested
        - OwnershipTransferred
        - PauseSwitched
        - RolesUpdated
        - TransferFinalized
        - TransferInitialized
      abis:
        - name: Bridge
          file: ./abis/Bridge.json
      eventHandlers:
        - event: FailedToRelayMessage(indexed address,indexed bytes32)
          handler: handleFailedToRelayMessage
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: MessageInitiated(indexed bytes32,indexed bytes32,(uint64,address,bytes))
          handler: handleMessageInitiated
        - event: MessageSuccessfullyRelayed(indexed address,indexed bytes32)
          handler: handleMessageSuccessfullyRelayed
        - event: OwnershipHandoverCanceled(indexed address)
          handler: handleOwnershipHandoverCanceled
        - event: OwnershipHandoverRequested(indexed address)
          handler: handleOwnershipHandoverRequested
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: PauseSwitched(bool)
          handler: handlePauseSwitched
        - event: RolesUpdated(indexed address,indexed uint256)
          handler: handleRolesUpdated
        - event: TransferFinalized(address,bytes32,address,uint256)
          handler: handleTransferFinalized
        - event: TransferInitialized(address,bytes32,bytes32,uint256)
          handler: handleTransferInitialized
      file: ./src/bridge.ts
  - kind: ethereum
    name: BridgeValidator
    network: base
    source:
      address: "0xAF24c1c24Ff3BF1e6D882518120fC25442d6794B"
      abi: BridgeValidator
      startBlock: 23140000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - MessageApproved
      abis:
        - name: BridgeValidator
          file: ./abis/BridgeValidator.json
      eventHandlers:
        - event: MessageRegistered(indexed bytes32,indexed bytes32)
          handler: handleMessageRegistered
      file: ./src/validator.ts
  - kind: ethereum
    name: CrossChainERC20Factory
    network: base
    source:
      address: "0xDD56781d0509650f8C2981231B6C917f2D56781d"
      abi: CrossChainERC20Factory
      startBlock: 23140000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - TwinCreated
      abis:
        - name: CrossChainERC20Factory
          file: ./abis/CrossChainERC20Factory.json
      eventHandlers:
        - event: CrossChainERC20Created(indexed address,indexed bytes32,address)
          handler: handleCrossChainERC20Created
      file: ./src/factory.ts
